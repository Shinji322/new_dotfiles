#!/bin/sh

download_danbooru() {
  mkdir -pv "$XDG_CONFIG_HOME/danbooru"
  wget --output-document "$XDG_CONFIG_HOME/danbooru/docker-compose.yaml" https://raw.githubusercontent.com/danbooru/danbooru/master/docker-compose.yaml 
}

danbooru() {
  [ ! -f "$XDG_CONFIG_HOME/danbooru/docker-compose.yaml" ] && download_danbooru
  docker-compose -f "$XDG_CONFIG_HOME/danbooru/docker-compose.yaml" up
}

grabber_instance() {
  $HOME/software/bin/appimages/Grabber_v7.8.1-x86_64.AppImage
}

if [[ "$1" == "stop" ]];
then
  docker stop danbooru-cron-1 danbooru-iqdb-1 danbooru-postgres-1 danbooru-redis-1 danbooru-jobs-1 danbooru-danbooru-1 && exit 0
fi

danbooru
# grabber_instance &
